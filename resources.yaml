---
# The latest image we want deployed. If images are running that have an
# appropriate prefix but are not running this image, they will be removed.
image: vggp-v60-j221-e2504756580f-dev
image_id: 17659e1c-f465-44ac-adcc-f7ad6f1448fc

image_gpu: vggp-gpu-v60-j13-b3cbf1b61e65-dev
image_gpu_id: cf7452fd-fb63-48be-81b2-e9fdd3a9ff42


network: bioinf
network_id: 7de249b6-6d32-44e3-b50c-291939868d2f
image_replace: false

secgroups:
  - ufr-ingress
  - egress

graceful: false
sshkey: cloud3

# The public key(s) we will accept when SSHing to a machine.
pubkeys:
  - "AAAAB3NzaC1yc2EAAAABIwAAAQEAuSG1VOumQhbJfOyalJjS4lPC8eeeL02ld/VI2BFApyMfwbB1QxehY3lMBXt/cBTzqU3MxgJQVzNr/AgjHa5rKn2hSGMfKAdaX2tG686k715bBjRm9rJNhmc8KSH9tVS35M0HwRXMfiGvSmb5qJ6utWRZe6RM2JMIbqqI5Oc4tbzPPVKk1+yvT1JdYuyqAOp2yvQbOqKaXmqOhPdPNaJZMI4o+UHmmb8FH6OTDY27G7X7u07ZPwVi1j+6ZFVMQZqg1RhUdg9kmHpHwMX7P6NcD4G9GsISHIh92eva9xgWYGiS0wUsmOWTNgAzzsfRZjMFep+jB2wup6QN7XpMw97eTw=="

nodes_inventory:
  c1.c28m225: 7
  c1.c28m475: 19
  c1.c36m100: 31
  c1.c36m225: 15
  c1.c36m900: 1
  c1.c36m975: 14
  c1.c60m1975: 1
  c1.c125m225: 12
  c1.c125m425: 36
  g1.c7m20g1: 8

deployment:
 # worker-maintenance:
 #   count: 1
 #   flavor: m1.large
 #   group: maintenance
 # worker-fastturnaround:
 #   count: 1
 #   flavor: m1.xlarge
 #   group: fast-turnaround
 # worker-fetch:
 #   count: 1
 #   flavor: c1.c36m100
 #   group: upload
 # worker-metadata:
 #   count: 1
 #   flavor: m1.large
 #   group: metadata
 #   cgroups:
 #     mem_limit_policy: soft
 #     mem_reserved_size: 1024
  worker-R9-interactive:
    count: 0 #8
    flavor: c1.c36m100
    group: interactive
    docker_ready: true
    volume:
      size: 1024
      type: default
 # worker-mothur:
 #   count: 3
 #   flavor: c1.c28m475
 #   group: compute_mothur
 #   cgroups:
 #     mem_limit_policy: hard
 #     mem_reserved_size: 2048
 # worker-c28m475:
 #   count: 12 #19
 #   flavor: c1.c28m475
 #   group: compute
 #   docker_ready: true
 #   volume:
 #     size: 1024
 #     type: default
 #   cgroups:
 #     mem_limit_policy: hard
 #     mem_reserved_size: 2048
 # worker-c28m225:
 #   count: 0 #7
 #   flavor: c1.c28m225
 #   group: compute_test
 #   docker_ready: true
 #   volume:
 #     size: 1024
 #     type: default
 #   cgroups:
 #     mem_limit_policy: hard
 #     mem_reserved_size: 2048
 # worker-c36m100:
 #   count: 21 #31
 #   flavor: c1.c36m100
 #   group: compute
 #   docker_ready: true
 #   volume:
 #     size: 1024
 #     type: default
 #   cgroups:
 #     mem_limit_policy: hard
 #     mem_reserved_size: 2048
 # worker-c36m225:
 #   count: 15 #15
 #   flavor: c1.c36m225
 #   group: compute
 #   docker_ready: true
 #   volume:
 #     size: 1024
 #     type: default
 #   cgroups:
 #     mem_limit_policy: hard
 #     mem_reserved_size: 2048
 # worker-c36m900:
 #   count: 1 #1 it's a c1.c36m975 host with probably a faulty memory bank
 #   flavor: c1.c36m900
 #   group: compute
 #   docker_ready: true
 #   volume:
 #     size: 1024
 #     type: default
 #   cgroups:
 #     mem_limit_policy: soft
 #     mem_reserved_size: 2048
 # worker-c36m975:
 #   count: 14 #14
 #   flavor: c1.c36m975
 #   group: compute
 #   docker_ready: true
 #   volume:
 #     size: 1024
 #     type: default
 #   cgroups:
 #     mem_limit_policy: soft
 #     mem_reserved_size: 2048
 # worker-c64m2:
 #   count: 1 #1
 #   flavor: c1.c60m1975
 #   group: compute
 #   docker_ready: true
 #   volume:
 #     size: 1024
 #     type: default
 # worker-c125m225:
 #   count: 12 #12
 #   flavor: c1.c125m225
 #   group: compute
 #   docker_ready: true
 #   volume:
 #     size: 1024
 #     type: default
 #   cgroups:
 #     mem_limit_policy: hard
 #     mem_reserved_size: 2048
 # worker-c125m425:
 #   count: 36 #36
 #   flavor: c1.c125m425
 #   group: compute
 #   docker_ready: true
 #   volume:
 #     size: 1024
 #     type: default
 #   cgroups:
 #     mem_limit_policy: hard
 #     mem_reserved_size: 2048
  worker-R9-gpu:
    count: 0 #16
    flavor: g1.c7m20g1
    group: compute_gpu
    gpu_ready: true
    docker_ready: true
    volume:
      size: 1024
      type: default
      boot: true
    cgroups:
      mem_limit_policy: soft
      mem_reserved_size: 1024

  # Rocky9 worker
  worker-R9-c36m100:
    count: 0
    flavor: c1.c36m100
    group: compute
    docker_ready: true
    volume:
      size: 1024
      type: default
    cgroups:
      mem_limit_policy: hard
      mem_reserved_size: 2048

  # Training
 # training-bio0:
 #   count: 1
 #   flavor: c1.c28m225
 #   start: 2022-10-13
 #   end: 2023-12-02
 #   group: training-bio00058m
